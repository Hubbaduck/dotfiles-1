# shell color excapes
COLOR_MAGENTA='\e[35m'
COLOR_CYAN='\e[36m'
COLOR_RESET='\e[0m'

# provide the git branch, if present
# a clean branch uses cyan, a dirty branch magenta
prompt_git() {
    git branch &>/dev/null || return 1
    HEAD="$(git symbolic-ref HEAD 2>/dev/null)"
    BRANCH="${HEAD##*/}"
    [[ -n "$(git status 2>/dev/null | \
        grep -F 'working directory clean')" ]] || STATUS=${COLOR_MAGENTA}
    printf ${COLOR_CYAN}${STATUS}'(%s)'${COLOR_RESET} "${BRANCH:-unknown}"
}

# enable variables and commands in the prompt
shopt -s promptvars

# set the prompt (like: [user@machine:Current Directory](gitbranch)$)
export PS1='[\u@\h:\W]$(prompt_git)\$ '

# for tmux powerline
export PLATFORM="mac"

# fix a bug with OS X bash and EDITOR
export EDITOR=vim

# set the path
export PATH="/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin"

# ruby
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"
# python
export PATH="/usr/local/share/python:$PATH"
# haskell
export PATH="$HOME/Library/Haskell/bin:$PATH"
# CUDA
export PATH="/usr/local/cuda/bin:$PATH"
# LaTeX
export PATH="/usr/local/texlive/2012/bin/x86_64-darwin:$PATH"

eval "$(rbenv init -)"

# pull in the aliases
if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi
